{#
    portal/grouplist.html
    ~~~~~~~~~~~~~~~~~~~~~

    This page shows all existing groups.

    :copyright: (c) 2007-2011 by the Inyoka Team, see AUTHORS for more details.
    :license: GNU GPL, see LICENSE for more details.
#}

{%- extends 'portal/overall.html' %}
{% do BREADCRUMB.append('Gruppen', href('portal', 'groups'), True) %}
{% block content %}
  <h3>Gruppen</h3>
  <p>
    Insgesamt gibt es
    {% trans count=group_count -%}
      <strong>{{ count }}</strong> Gruppe
    {%- pluralize -%}
      <strong>{{ count }}</strong> Gruppen
    {%- endtrans %} von denen du in <strong>{{ user_groups.count() }}</strong> Mitglied bist (fett gedruckt).
  </p>
  {%- if USER.can('group_edit') -%}
    <p>
      <a href="{{ href('portal', 'group', 'new') }}">Eine neue Grupppe anlegen</a>.
    </p>
  {%- endif -%}
  <table class="admin_link_hover">
    <tr>
      <th>{{ table.get_html('name', 'Name') }}</th>
    </tr>
    {%- for group in groups %}
    <tr>
      <td{% if not group.is_public %} class="hidden"{% endif %}>
        {%- if group in user_groups %}<strong>{% endif -%}
        <a href="{{ group|url }}">{{ group.name|e }}</a>
        {%- if group in user_groups %}</strong>{% endif -%}
        {%- if USER.can('group_edit') -%}
          <a href="{{ href('portal', 'group', group.name|e, 'edit') }}" class="admin_link"><img src="{{ href('static', 'img/ikhaya/category_edit.png') }}" /></a>
        {%- endif -%}
      </td>
    </tr>
    {%- endfor %}
  </table>
  {{ pagination.generate() }}
{% endblock %}
